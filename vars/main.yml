---
firewall_allowed_tcp_ports:
  - "22"

docker_selinux: disabled

fail2ban_jails: [sshd, postfix, dovecot]

# source: https://github.com/pablocrivella/ansible-role-nvm
# ---
# # This could be set to 'user' to support user installs.
# nvm_env: system

# nvm_version: v0.31.6

# # This sets the nvm global nodejs version.
# nvm_default_node_version: stable

# # List of nodejs versions to install.
# nvm_node_versions:
#   - stable

# # List of default packages to install on each nodejs version.
# nvm_global_packages: []

# # List of users to install nvm and nodejs versions to.
# # Ignored if nvm_env is set to 'system'
# nvm_users: []


# net.core.somaxconn=65535
# net.ipv4.ip_local_port_range=10240  63999
# net.ipv4.tcp_tw_recycle=0
# net.ipv4.tcp_tw_reuse=1
# net.ipv4.tcp_max_syn_backlog=65535
# net.ipv4.tcp_max_tw_buckets=1440000
# net.ipv4.tcp_window_scaling=1
# net.ipv4.tcp_congestion_control=htcp
# net.core.netdev_max_backlog=250000
# net.ipv4.tcp_mtu_probing=1
# net.ipv4.tcp_slow_start_after_idle=0
# fs.file-max=6511048
# net.netfilter.nf_conntrack_max=262144
# net.ipv4.tcp_max_syn_backlog=4096


# array=( net.core.somaxconn net.ipv4.ip_local_port_range net.ipv4.tcp_tw_recycle net.ipv4.tcp_tw_reuse net.ipv4.tcp_max_syn_backlog net.ipv4.tcp_max_tw_buckets net.ipv4.tcp_window_scaling net.ipv4.tcp_congestion_control net.core.netdev_max_backlog net.ipv4.tcp_mtu_probing net.ipv4.tcp_slow_start_after_idle fs.file-max net.netfilter.nf_conntrack_max net.ipv4.tcp_max_syn_backlog )

# for i in "${array[@]}"; do ./goss add kernel-param $i;  done


# -----------------------
#
# ./goss add file /etc/sysctl.d/ker_optimizations.conf


# ip-10-74-185-28 ~ # cat /etc/modules-load.d/nf.conf
# nf_conntrack

# ip-10-74-185-28 ~ # cat /etc/sysctl.d/ker_optimizations.conf
# net.core.somaxconn=65535
# net.ipv4.ip_local_port_range=10240  63999
# net.ipv4.tcp_tw_recycle=0
# net.ipv4.tcp_tw_reuse=1
# net.ipv4.tcp_max_syn_backlog=65535
# net.ipv4.tcp_max_tw_buckets=1440000
# net.ipv4.tcp_window_scaling=1
# net.ipv4.tcp_congestion_control=htcp
# net.core.netdev_max_backlog=250000
# net.ipv4.tcp_mtu_probing=1
# net.ipv4.tcp_slow_start_after_idle=0
# fs.file-max=6511048
# net.netfilter.nf_conntrack_max=262144
# net.ipv4.tcp_max_syn_backlog=4096

# ip-10-74-185-28 ~ # cat /etc/systemd/system/systemd-journald.service.d/local.conf
# # WARNING - this file was automatically created on boot
# # some of these values may not be accurate relative to etcd!
# [Service]
# WatchdogSec=3min
# ip-10-74-185-28 ~ #


# ip-10-74-185-28 docker.service.d # cat 10-wait-docker.conf
# [Unit]
# After=format-docker.service
# Requires=format-docker.service

# ip-10-74-185-28 docker.service.d # cat 20-dm-storage.conf
# [Service]
# Environment="DOCKER_OPTS=--log-driver=json-file --log-opt max-file=10 --log-opt max-size=10m --disable-legacy-registry"

# ip-10-74-185-28 docker.service.d # cat increase-ulimit.conf
# # WARNING - this file was automatically created on boot
# # some of these values may not be accurate relative to etcd!
# [Service]
# LimitMEMLOCK=infinity
# LimitNOFILE=1048576
# LimitNPROC=1048576
# LimitCORE=infinity

# ip-10-74-185-28 docker.service.d # pwd
# /etc/systemd/system/docker.service.d
# ip-10-74-185-28 docker.service.d #


# "    - name: systemd-modules-load.service\n",
# "      command: restart\n",
# "    - name: systemd-sysctl.service\n",
# "      command: restart\n",
#


# # The driftfile
# ntp_driftfile: /var/lib/ntp/drifta

# # The server to sync time with
# ntp_server: [0.ubuntu.pool.ntp.org, 1.ubuntu.pool.ntp.org]

# ntp_restrict:
#   - "restrict -4 default kod notrap nomodify nopeer noquery"
#   - "restrict -6 default kod notrap nomodify nopeer noquery"
#   - "restrict 127.0.0.1"

# ntp_crypto: no
# ntp_includefile: no
# ntp_keys: no
# ntp_trustedkey: no
# ntp_requestkey: no
# ntp_controlkey: no
# ntp_statistics: no
# ntp_broadcast: no
# ntp_broadcastclient: no
# ntp_multicastclient: no
